function g(a,b){return[a*b[0],a*b[1]]}function k(a,b){return[a[0]+b[0],a[1]+b[1]]}function l(a,b){return[a[0]-b[0],a[1]-b[1]]}function m(a,b){return k(g(b[0],a[0]),g(b[1],a[1]))}function n(a,b){this.a=a;this.b=b}function p(a){var b=a.a;a=a.b;return"matrix("+b[0][0]+","+b[0][1]+","+b[1][0]+","+b[1][1]+","+a[0]+","+a[1]+")"}function q(a,b){var d=a.a,h=b.a;return new n([m(d,h[0]),m(d,h[1])],k(m(a.a,b.b),a.b))}var t=new n([[1,0],[0,1]],[0,0]);
function u(a,b){function d(b){var c=b[0].pageX-a.offsetLeft;b=b[0].pageY-a.offsetTop;return[[c,b],[c+1,b+1]]}function h(b){var c=a.offsetLeft,d=a.offsetTop;return[[b[0].pageX-c,b[0].pageY-d],[b[1].pageX-c,b[1].pageY-d]]}this.c=a;this.b=!1;this.a=t;this.f=null;this.h=[0,0];var c=this,e=!1;b=b||{};b.pan=b.pan||!0;a.style["transform-origin"]="0 0";a.parentNode.addEventListener("touchstart",function(b){var a=b.touches;if(!a)return!1;b.preventDefault();c.h=1<a.length?h(a):d(a);2===a.length?c.b=!0:1==a.length&&
(e?(e=c.b=!1,c.g()):(e=setTimeout(function(){e=!1},300),c.b=!0))});a.parentNode.addEventListener("touchmove",function(b){var a=b.touches;if(!a||1==a.length&&!c.i.pan||!c.b)return!1;b.preventDefault();b=c.h;var a=1<a.length?h(a):d(a),e,f=l(b[1],b[0]),r=l(a[1],a[0]),w=f[0]*f[0]+f[1]*f[1];e=(f[0]*r[0]+f[1]*r[1])/w;f=(f[0]*r[1]-f[1]*r[0])/w;e=[[e,f],[-f,e]];c.f=new n(e,l(a[0],m(e,b[0])));c.c.style.transform=p(q(c.f,c.a))});a.parentNode.addEventListener("touchend",function(){c.b&&(c.a=q(c.f,c.a),c.b=!1)})}
u.prototype.g=function(){if(window.requestAnimationFrame){var a=this.a,b=null,d=this,h=function(c){b||(b=c);c=(c-b)/100;if(1<c)d.a=t,d.b=!1,d.c.style.transform=p(d.a);else{var e=a.a,v=t.a;d.c.style.transform=p(new n([k(g(1-c,e[0]),g(c,v[0])),k(g(1-c,e[1]),g(c,v[1]))],k(g(1-c,a.b),g(c,t.b))));window.requestAnimationFrame(h)}};window.requestAnimationFrame(h)}else this.a=t,this.b=!1,this.c.style.transform=p(this.a)};u.prototype.reset=u.prototype.g;window.Zoom=u;
